@tailwind base;
@tailwind components;
@tailwind utilities;

/* Leaflet CSS */
@import 'leaflet/dist/leaflet.css';

/* Import brand tokens */
@import './brand-tokens.css';

@layer base {
  :root {
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
  .dark {
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  /* Sidebar width customization */
  [data-sidebar='sidebar'] {
    width: 20rem !important; /* 320px */
  }

  /* Target the sidebar when its parent has collapsed state */
  [data-state='collapsed'] [data-sidebar='sidebar'] {
    width: 3rem !important; /* 48px */
  }

  /* Remove all padding when sidebar is collapsed */
  [data-state='collapsed'] [data-sidebar='group'],
  [data-state='collapsed'] [data-sidebar='header'],
  [data-state='collapsed'] [data-sidebar='footer'],
  [data-state='collapsed'] [data-sidebar='group-label'],
  [data-state='collapsed'] [data-sidebar='menu-button'] {
    padding: 0 !important;
  }

  /* Center icons in collapsed sidebar */
  [data-state='collapsed'] [data-sidebar='menu-button'] {
    justify-content: center !important;
    width: 3rem !important;
    height: 2rem !important;
  }

  /* Hide badges when sidebar is collapsed */
  [data-state='collapsed'] [data-sidebar='menu-button'] .inline-flex {
    display: none !important;
  }

  /* Ensure proper flex layout for sidebar and content */
  [data-sidebar-provider] {
    display: flex !important;
    min-height: 100vh !important;
    width: 100% !important;
  }

  [data-sidebar-inset] {
    flex: 1 !important;
    min-width: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    min-height: 100vh !important;
  }

  /* Progress bar with dynamic width using CSS custom properties */
  .progress-bar[style*='--width'] {
    width: calc(var(--width) * 1%);
  }

  /* Radix Progress component with CSS custom properties */
  [data-radix-progress-indicator][style*='--progress-value'] {
    transform: translateX(calc(-100% + var(--progress-value) * 1%));
  }

  /* Map container with dynamic height */
  .map-container[style*='--map-height'] {
    height: var(--map-height);
  }

  /* Dynamic icon colors */
  [style*='--icon-color'] {
    color: var(--icon-color);
  }

  /* Dynamic color utilities */
  [style*='--dynamic-color'] {
    color: var(--dynamic-color);
  }

  [style*='--dynamic-bg'] {
    background-color: var(--dynamic-bg);
  }

  [style*='--dynamic-text'] {
    color: var(--dynamic-text);
  }

  /* Status Badge Variants */
  .badge-status-active {
    background-color: var(--status-active);
    color: var(--status-active-foreground);
  }

  .badge-status-inactive {
    background-color: var(--status-inactive);
    color: var(--status-inactive-foreground);
  }

  .badge-status-construction {
    background-color: var(--status-construction);
    color: var(--status-construction-foreground);
  }

  .badge-status-maintenance {
    background-color: var(--status-maintenance);
    color: var(--status-maintenance-foreground);
  }

  .badge-status-decommissioned {
    background-color: var(--status-decommissioned);
    color: var(--status-decommissioned-foreground);
  }

  .badge-status-planned {
    background-color: var(--status-planned);
    color: var(--status-planned-foreground);
  }

  /* Condition Badge Variants */
  .badge-condition-excellent {
    background-color: var(--condition-excellent);
    color: var(--condition-excellent-foreground);
  }

  .badge-condition-good {
    background-color: var(--condition-good);
    color: var(--condition-good-foreground);
  }

  .badge-condition-fair {
    background-color: var(--condition-fair);
    color: var(--condition-fair-foreground);
  }

  .badge-condition-poor {
    background-color: var(--condition-poor);
    color: var(--condition-poor-foreground);
  }

  .badge-condition-critical {
    background-color: var(--condition-critical);
    color: var(--condition-critical-foreground);
  }

  .badge-condition-unknown {
    background-color: var(--condition-unknown);
    color: var(--condition-unknown-foreground);
  }

  /* Priority Badge Variants */
  .badge-priority-low {
    background-color: var(--priority-low);
    color: var(--priority-low-foreground);
  }

  .badge-priority-medium {
    background-color: var(--priority-medium);
    color: var(--priority-medium-foreground);
  }

  .badge-priority-high {
    background-color: var(--priority-high);
    color: var(--priority-high-foreground);
  }

  .badge-priority-critical {
    background-color: var(--priority-critical);
    color: var(--priority-critical-foreground);
  }

  [style*='--dynamic-border'] {
    border-color: var(--dynamic-border);
  }

  [style*='--dynamic-width'] {
    width: var(--dynamic-width);
  }

  [style*='--dynamic-height'] {
    height: var(--dynamic-height);
  }

  [style*='--dynamic-transform'] {
    transform: var(--dynamic-transform);
  }
}
